<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Homework</title>
  <link rel="stylesheet" href="thw.css" />
  <style>
    nav { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
    .welcome { text-align: center; margin-top: 10px; font-size: 18px; color: #3a0ca3; }
    .logout-btn {
      background: #ef233c; color: white; border: none;
      padding: 10px 16px; border-radius: 6px; cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="logo">TheHomework</div>
  <div class="welcome" id="welcomeMsg"></div>

  <nav>
    <a href="index.html">Trang chủ</a>
    <a href="room.html">Tham gia</a>
    <a href="store.html">Xem lại bài kiểm tra</a>
    <a href="homework.html" id="createTestLink">Tạo bài kiểm tra</a>
    <a href="loginfrom.html" id="loginLink">Đăng nhập</a>
    <a href="Registerfrom.html" id="registerLink">Đăng ký</a>
    <button id="logoutBtn" class="logout-btn" style="display: none;">Đăng xuất</button>
  </nav>

  <section class="hero">
    <h1>Tạo Bài Kiểm Tra Dễ Dàng & Vui Nhộn</h1>
    <button onclick="window.location.href='room.html'">Bắt đầu ngay</button>
  </section>

  <section class="features">
    <div class="feature-box">
      <h3>Trắc nghiệm linh hoạt</h3>
      <p>Tạo câu hỏi tự do, chọn nhiều hình thức kiểm tra</p>
    </div>
    <div class="feature-box">
      <h3>Chấm điểm tự động</h3>
      <p>Tiết kiệm thời gian cho giáo viên</p>
    </div>
    <div class="feature-box">
      <h3>Lưu bài kiểm tra</h3>
      <p>Giáo viên có thể xem lại bài kiểm tra</p>
    </div>
  </section>

  <script type="module">
    
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // Cấu hình Firebase của bạn
  const firebaseConfig = {
    apiKey: "AIzaSyCeknM8tnc_iwZD6kZO5PtTQNlnwZDcsNk",
      authDomain: "homework-c9856.firebaseapp.com",
      projectId: "homework-c9856",
      storageBucket: "homework-c9856.appspot.com",
      messagingSenderId: "311478945480",
      appId: "1:311478945480:web:2bce7ce956cde6adeb07fd"
  };

  // Khởi tạo Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const welcome = document.getElementById("welcomeMsg");
  const loginLink = document.getElementById("loginLink");
  const registerLink = document.getElementById("registerLink");
  const logoutBtn = document.getElementById("logoutBtn");
  const createTestLink = document.getElementById("createTestLink");

  createTestLink.style.display = "none";

  // Theo dõi trạng thái đăng nhập
 onAuthStateChanged(auth, (user) => {
  if (user) {
    welcome.textContent = `👋 Xin chào, ${user.email}`;
    loginLink.style.display = "none";
    registerLink.style.display = "none";
    logoutBtn.style.display = "inline-block";
    createTestLink.style.display = "inline-block"; // nếu muốn luôn hiện
  } else {
    welcome.textContent = "";
    loginLink.style.display = "inline-block";
    registerLink.style.display = "inline-block";
    logoutBtn.style.display = "none";
    createTestLink.style.display = "none";
  }
  
});

</script>
</body>
</html>
